var BaseModel=Backbone.Model.extend({defaults:{checked:!1,checked_all:!1,children:[]},baseId:"",url:function(){var t=this.baseUrl,i="";if(!t)return"";"function"===Est.typeOf(t)&&(t=t.call(this)),this.params=this.params?this.params:"";var e=Est.isEmpty(this.params)?"":"?";return this.isNew()&&Est.isEmpty(this.id)?t+e+this.params:(i=t+("/"==t.charAt(t.length-1)?"":"/")+this.id+e+this.params,debug(function(){return"[Query]"+i}),i)},_initialize:function(t){this.validateMsg=null,debug("9.BaseModel._initialize "+this.baseId)},parse:function(t,i){var e=this,s=[],a=!1;if("msg"in t&&BaseUtils.removeLoading(),Est.isEmpty(t)){var n="function"===Est.typeOf(this.url)?this.url():this.url;return debug("Error25 url"+n),BaseUtils.tip(CONST.LANG.REQUIRE_FAILED),!1}if(t&&t.msg&&t.msg===CONST.LANG.AUTH_FAILED&&BaseUtils.tip(CONST.LANG.AUTH_LIMIT,{time:2e3}),t.msg!==CONST.LANG.NOT_LOGIN||this.stopCheckLogin||Est.trigger("checkLogin"),t.msg&&!this.hideTip){t.success?(!e.isNew()||this.autoHide||this.hideAddBtn||(s.push({value:CONST.LANG.ADD_CONTINUE,callback:function(){e.set("id",null),e.set(e.baseId,null)}}),a=!0),!this.hideOkBtn&&s.push({value:CONST.LANG.CONFIRM,callback:function(){if(Est.trigger("_dialog_submit_callback"),this.autoBack="undefined"===Est.typeOf(this.autoBack)?!0:this.autoBack,"undefined"!=typeof window.topDialog)window.topDialog.close(),window.topDialog=null,$&&this.autoBack&&$(".btn-back").click();else if(app.getDialogs().length>0)try{app.getDialogs().pop().close().remove(),$&&this.autoBack&&$(".btn-back").click()}catch(t){}this.close()},autofocus:!0})):s.push({value:CONST.LANG.CONFIRM,callback:function(){this.close()},autofocus:!0}),this.hideOkBtn&&Est.trigger("_dialog_submit_callback");BaseUtils.dialog({id:"dialog_msg",title:CONST.LANG.TIP,content:'<div style="padding: 20px;">'+t.msg+"</div>",width:250,button:s});setTimeout(function(){app.getDialog("dialog_msg")&&(e.autoHide||!a)&&app.getDialog("dialog_msg").close().remove()},2e3)}if("boolean"===Est.typeOf(t.success)&&!t.success)return e.attributes._response=t,e.attributes;if(t.attributes&&t.attributes.data){var c=Est.keys(t.attributes);c.length>1&&Est.each(c,function(i){"data"!==i&&(t.attributes.data[i]=t.attributes[i])}),t=t.attributes.data}return t&&(t.id=t[e.baseId||"id"],t.checked=!1,t.time=(new Date).getTime()),t},_saveField:function(t,i,e){var s=e.async||!0,a=new i.initModel({id:t.id||i.model.get("id")});a.clear(),a.set(t),a.set("silent",!0),e.hideTip&&(a.hideTip=!0),a.hideOkBtn=!0,a.set("editField",!0),debug(function(){return a.baseUrl?void 0:"Error27"},{type:"console"}),a.baseUrl?a.save(null,{success:function(s,a){a.msg!==CONST.LANG.NOT_LOGIN||this.stopCheckLogin||Est.trigger("checkLogin"),"undefined"!=typeof e.success&&e.success&&e.success.call(i,t,a)},wait:s}):e.success&&e.success.call(i,t,{})},_getChildren:function(t){return Est.map(this.get("children"),function(i){return"string"==typeof i||"number"==typeof i?t.get(i):i})},_hideTip:function(){this.hideTip=!0},_toggle:function(){this.set("checked",!this.get("checked"))},_validation:function(t,i){return!t.silent&&i&&i.call(this,t),this.validateMsg},_getValue:function(t){return Est.getValue(this.attributes,t)},_setValue:function(t,i){Est.setValue(this.attributes,t,i)},initialize:function(){this._initialize()}});