var PaginationModel=Backbone.Model.extend({defaults:{page:1,pageSize:16,count:0},initialize:function(){debug("3.PaginationModel.initialize")}}),BaseCollection=Backbone.Collection.extend({constructor:function(t){this.options=t||{},Backbone.Collection.apply(this,[null,arguments])},_initialize:function(){debug("2.BaseCollection._initialize"),this._baseUrl=this.url,this.paginationModel||(this.paginationModel=new PaginationModel({page:this.options.page,pageSize:this.options.pageSize}))},initialize:function(){this._initialize()},parse:function(t,i){var e=this;return Est.isEmpty(t)?(debug(function(){var t="function"===Est.typeOf(e.url)?e.url():e.url;return"Error:14 "+t},{type:"error"}),[]):(this._parsePagination(t),this._parseUrl(this.paginationModel),this.options.pagination&&this.paginationModel&&this._paginationRender(),t.attributes.data)},_parseUrl:function(t){debug("- BaseCollection._parseUrl");var i=1,e=16;if(t&&t.get("pageSize")&&(e=t.get("pageSize"),i=t.get("page")),this.options.subRender&&(i=1,e=9e3),"function"!=typeof this.url){var n="";Est.isEmpty(this._itemId)||(n="/"+this._itemId),this.url=this._baseUrl+n+"?page="+i+"&pageSize="+e}},_parsePagination:function(t){debug("6.BaseCollection._parsePagination"),t.attributes=t.attributes||{page:1,per_page:10,count:10},this.paginationModel&&(this.paginationModel.set("page",t.attributes.page),this.paginationModel.set("pageSize",t.attributes.per_page),this.paginationModel.set("count",t.attributes.count))},_paginationRender:function(){seajs.use(["Pagination"],Est.proxy(function(t){if(this.pagination)this.pagination.render();else{var i=$(this.options.el),e="string"===Est.typeOf(this.options.pagination),n=$(e?this.options.pagination:"#pagination-container",i.size()>0?i:$("body"));e&&this.paginationModel.set("numLength",parseInt(n.attr("data-numLength")||7,10)),this.pagination=new t({el:n,model:this.paginationModel})}},this))},_load:function(t,i,e){return debug("4.BaseCollection._load"),this._parseUrl(e),t.fetch({success:function(){debug("5.collection reset"),i._empty()},cacheData:this.options.cache,session:this.options.session})},_setItemId:function(t){this._itemId=t,debug("- get list by itemId "+this._itemId)},_empty:function(){if(debug("BaseCollection._empty"),this.collection)for(var t=this.collection.length;t>-1;)this.collection.remove(this.collection[t]),t--}});