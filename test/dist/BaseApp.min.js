var BaseApp=function(t){this.options=t,Est.extend(this,t),this.initialize.apply(this,arguments)};Est.extend(BaseApp.prototype,{initialize:function(){this.data={itemActiveList:[],sessionId:""},this.instance={},this.modules={},this.routes={},this.templates={},this.panels={},this.dialog=[],this.dialogs={},this.status={},this.cookies=[],this.models=[],this.compileTemps={},this.filters={navigator:[],form:[]},this.cache={}},getAppType:function(){return"backbone"},addRegion:function(t,e,i){var s=Est.nextUid("region");return i.__panelId||(i.__panelId=i.el),i.diff&&app.getView(i.viewId||t)?(app.getView(i.viewId||t)._extend(i),void app.getView(i.viewId||t)._reset(i.data)):(this.addPanel(t,{el:i.__panelId,template:'<div class="region '+s+'"></div>'},i),i.viewId||(i.viewId=t),i.viewId in this.instance&&this.removeView(i.viewId),this.addView(i.viewId,new e(i)))},addPanel:function(t,e,i){var s="string"===Est.typeOf(e.cid)?!1:!0;return i=i||{},s&&(this.removePanel(t,e),e.$template=$(e.template),i&&(i.el=e.$template),e.$template.addClass("__panel_"+t),e.$template.attr("data-view",i.viewId||t),i&&"boolean"===Est.typeOf(i.append)&&!i.append&&$(e.el).empty(),$(e.el).append(e.$template)),this.panels[t]=e,s?this:e},removePanel:function(t,e){try{var i=[];e||(e=this.panels[t]),"body"!==e.el&&($(".region",$(e.el)).each(function(){i.push($(this).attr("data-view"))}),i.reverse(),Est.each(i,function(t){app.getView(t)&&app.getView(t).destroy&&app.getView(t).destroy(),app.removeView(t)})),$(".__panel_"+t,$(e.el)).off().remove(),delete this.panels[t]}catch(s){console.error(s)}},addView:function(t,e){return t in this.instance&&this.removeView(t),this.instance[t]=e,this.setCurrentView(t),this.instance[t]},removeView:function(t){try{this.getView(t)&&(this.getView(t).destroy&&this.getView(t).destroy(),this.getView(t)._empty(),this.getView(t).stopListening(),this.getView(t).$el.off().remove()),delete this.instance[t]}catch(e){console.log(e)}return this},panel:function(t,e){return this.addPanel(t,e)},show:function(t){this.addView(this.currentView,t)},getPanel:function(t){return this.panels[t]},add:function(t,e){return this.addView(t,e)},setCurrentView:function(t){this.currentView=t},getCurrentView:function(){return this.currentView},getView:function(t){return this.instance[t]},addDialog:function(t,e){return this.dialog.push(t),e&&(app.addData("_curDialog",e),this.dialogs[e]=t),t},getDialogs:function(){return this.dialog},getDialog:function(t){return Est.isEmpty(t)?this.dialogs:this.dialogs[t]},getCurrentDialog:function(){return app.getData("_curDialog")?this.dialogs[app.getData("_curDialog")]:null},emptyDialog:function(){Est.each(this.dialog,function(t){t&&t.close&&t.close().remove()}),this.dialog=[],this.dialogs={},app.addData("_curDialog",null)},addModel:function(t){return this.models.push(t),t},getModels:function(){return this.models},addData:function(t,e){t in this.data&&debug("reset data "+t),this.data[t]=e},getData:function(t){return this.data[t]},addModule:function(t,e){t in this.modules&&debug("Error10 module="+t),this.modules[t]=e},getModules:function(){return this.modules},addRoute:function(t,e){t in this.routes&&debug("Error13 "+t),this.routes[t]=e},getRoutes:function(){return this.routes},addTemplate:function(t,e){t in this.templates&&debug("Error11 template name:"+t),this.templates[t]=e},getTemplates:function(){return this.templates},addSession:function(t,e,i){try{var s="undefined"===Est.typeOf(i)?"":i?this.data.sessionId:"";localStorage["___JHW_BACKBONE__"+Est.hash(s+t)]=e}catch(n){debug("Error9 "+n)}return e},getSession:function(t,e){var i="undefined"===Est.typeOf(e)?"":e?this.data.sessionId:"";return localStorage["___JHW_BACKBONE__"+Est.hash(i+t)]},addCompileTemp:function(t,e){this.compileTemps[t]=e},getCompileTemp:function(t){return this.compileTemps[t]},addStatus:function(t,e){this.status[t]=e},getStatus:function(t){return this.status[t]},getAllStatus:function(){return this.status},addOption:function(t,e){this.options[t]=e},getOption:function(t){return Est.cloneDeep(this.options[t])},addFilter:function(t,e){this.filters[t].push(e)},getFilters:function(t){return this.filters[t]},getParamsHash:function(t){var e="",i="";for(var s in t)e+=t[s];return i="_hash"+Est.hash(e)},addCache:function(t,e){try{var i="";if(!e.success)return;i=this.getParamsHash(t),t.session&&e?app.addSession(i,JSON.stringify(e)):this.cache[i]=e}catch(s){debug("Error12"+s)}},getCache:function(t){var e=null,i=this.getParamsHash(t);return!t.session||app.getData("versionUpdated")?this.cache[i]:(e=app.getSession(i))?JSON.parse(e):void 0},removeCache:function(t){var e=null;return t?(e=this.getParamsHash(t),void delete this.cache[e]):void(this.cache={})},addCookie:function(t){-1===Est.findIndex(this.cookies,t)&&this.cookies.push(t)},getCookies:function(){return this.cookies}});